<!-- 拳馆档案编辑页 -->
<view class="container">
  <view class="header">
    <text class="title">编辑拳馆档案</text>
    <text class="subtitle">修改拳馆信息</text>
  </view>

  <form class="form" bindsubmit="onSubmit">
    <!-- 拳馆名称 (必填) -->
    <view class="form-item">
      <text class="label">拳馆名称 *</text>
      <input
        class="input"
        name="name"
        placeholder="请输入拳馆名称"
        value="{{formData.name}}"
        bindinput="onNameInput"
        maxlength="50"
      />
    </view>

    <!-- 地址 (必填) -->
    <view class="form-item">
      <text class="label">地址 *</text>
      <view class="location-section">
        <input
          class="input location-input"
          name="address"
          placeholder="请输入详细地址"
          value="{{formData.address}}"
          bindinput="onAddressInput"
        />
        <button class="location-btn" type="default" bindtap="onChooseLocation">
          定位
        </button>
      </view>
    </view>

    <!-- 城市 (可选) -->
    <view class="form-item">
      <text class="label">城市</text>
      <input
        class="input"
        name="city"
        placeholder="请输入所在城市"
        value="{{formData.city}}"
        bindinput="onCityInput"
      />
    </view>

    <!-- 联系电话 (必填) -->
    <view class="form-item">
      <text class="label">联系电话 *</text>
      <input
        class="input"
        type="number"
        name="phone"
        placeholder="请输入联系电话"
        value="{{formData.phone}}"
        bindinput="onPhoneInput"
        maxlength="11"
      />
    </view>

    <!-- 拳馆图标 (可选) -->
    <view class="form-item">
      <text class="label">拳馆图标</text>
      <view class="upload-section">
        <image
          class="icon-preview"
          src="{{formData.icon_url || '/images/gym-placeholder.png'}}"
          mode="aspectFill"
        />
        <button class="upload-btn" type="default" bindtap="onChooseImage" disabled="{{uploadingImage}}">
          {{uploadingImage ? '上传中...' : (formData.icon_url ? '重新选择' : '选择图片')}}
        </button>
      </view>
    </view>

    <!-- 提交按钮 -->
    <view class="submit-section">
      <button
        class="submit-btn {{isFormValid ? '' : 'disabled'}}"
        formType="submit"
        disabled="{{!isFormValid}}"
        loading="{{submitting}}"
      >
        保存修改
      </button>
      <button class="cancel-btn" bindtap="onCancel">取消</button>
    </view>
  </form>
</view>
