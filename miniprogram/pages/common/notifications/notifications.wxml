<!-- æ¶ˆæ¯ä¸­å¿ƒé¡µ -->
<view class="container">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <view class="nav-bar" style="padding-top: {{statusBarHeight}}px; height: {{navBarHeight}}px;">
    <view class="nav-bar-content">
      <text class="nav-bar-back" bindtap="onBack">â†</text>
      <text class="nav-bar-title">æ¶ˆæ¯ä¸­å¿ƒ</text>
      <text class="nav-bar-action" bindtap="onMarkAllRead">å…¨éƒ¨å·²è¯»</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading && list.length === 0}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:if="{{!loading && list.length === 0}}">
    <text class="empty-icon">ğŸ“¬</text>
    <text class="empty-text">æš‚æ— æ¶ˆæ¯</text>
  </view>

  <!-- æ¶ˆæ¯åˆ—è¡¨ -->
  <view class="list" wx:if="{{list.length > 0}}" style="padding-top: {{navBarHeight + 20}}px;">
    <view
      class="card {{item.is_read ? 'read' : 'unread'}}"
      wx:for="{{list}}"
      wx:key="notification_id"
      bindtap="onCardTap"
      data-id="{{item.notification_id}}"
      data-read="{{item.is_read}}"
    >
      <view class="card-header">
        <view class="card-type {{item.type}}">
          <text class="type-icon">
            {{item.type === 'new_booking' ? 'ğŸ“' : (item.type === 'cancelled_booking' ? 'âŒ' : 'ğŸ“¢')}}
          </text>
          <text class="type-text">
            {{item.type === 'new_booking' ? 'æ–°é¢„çº¦' : (item.type === 'cancelled_booking' ? 'å–æ¶ˆé¢„çº¦' : 'é€šçŸ¥')}}
          </text>
        </view>
        <view class="card-time">{{item.created_at_text}}</view>
      </view>

      <view class="card-title">{{item.title}}</view>
      <view class="card-content">{{item.content}}</view>

      <view class="unread-dot" wx:if="{{!item.is_read}}"></view>
    </view>
  </view>
</view>
