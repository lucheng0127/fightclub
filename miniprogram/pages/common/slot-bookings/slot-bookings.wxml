<!-- é¢„çº¦æ‹³æ‰‹åˆ—è¡¨é¡µ -->
<view class="container">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <view class="nav-bar" style="padding-top: {{statusBarHeight}}px; height: {{navBarHeight}}px;">
    <view class="nav-bar-content">
      <text class="nav-bar-back" bindtap="onBack">â†</text>
      <text class="nav-bar-title">é¢„çº¦æ‹³æ‰‹</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- å†…å®¹åŒºåŸŸ -->
  <view class="content" wx:if="{{!loading && slot && gym}}" style="padding-top: {{navBarHeight + 20}}px;">
    <!-- æ—¶é—´æ®µä¿¡æ¯ -->
    <view class="section slot-section">
      <view class="section-title">æ—¶é—´æ®µ</view>
      <view class="slot-info-card">
        <view class="slot-gym">{{gym.name}}</view>
        <view class="slot-date">{{slot.date}}</view>
        <view class="slot-time">{{slot.start_time}} - {{slot.end_time}}</view>
        <view class="slot-capacity">
          <text>é¢„çº¦äººæ•°ï¼š{{slot.current_bookings}}/{{slot.max_boxers}}</text>
          <text wx:if="{{slot.available_spots > 0}}"> (ä½™{{slot.available_spots}})</text>
        </view>
      </view>
    </view>

    <!-- æ‹³æ‰‹åˆ—è¡¨ -->
    <view class="section boxers-section">
      <view class="section-title">
        <text>é¢„çº¦æ‹³æ‰‹</text>
        <text class="count">({{boxers.length}})</text>
      </view>

      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty" wx:if="{{boxers.length === 0}}">
        <text class="empty-text">æš‚æ— é¢„çº¦</text>
      </view>

      <!-- åˆ—è¡¨ -->
      <view class="boxers-list" wx:if="{{boxers.length > 0}}">
        <view
          class="boxer-card"
          wx:for="{{boxers}}"
          wx:key="boxer_id"
          bindtap="onBoxerTap"
          data-id="{{item.boxer_id}}"
        >
          <view class="boxer-avatar">ğŸ¥Š</view>
          <view class="boxer-info">
            <view class="boxer-name-row">
              <text class="boxer-name">{{item.nickname}}</text>
              <view class="boxer-gender {{item.gender === 'male' ? 'male' : 'female'}}">
                {{item.gender === 'male' ? 'â™‚' : 'â™€'}}
              </view>
            </view>
            <view class="boxer-details">
              <text class="detail-item">{{item.age}}å²</text>
              <text class="detail-item">{{item.height}}cm</text>
              <text class="detail-item">{{item.weight}}kg</text>
              <text class="detail-item" wx:if="{{item.city}}">{{item.city}}</text>
            </view>
            <view class="booking-time" wx:if="{{item.booking_time}}">
              <text class="time-label">é¢„çº¦æ—¶é—´ï¼š</text>
              <text>{{item.booking_time_text}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- æ‹³é¦†æ“ä½œï¼ˆä»…ä»æ‹³é¦†ä¾§è¿›å…¥æ—¶æ˜¾ç¤ºï¼‰ -->
    <view class="gym-actions" wx:if="{{from === 'gym'}}">
      <button class="action-btn" bindtap="onContact">è”ç³»æ‹³æ‰‹</button>
    </view>
  </view>
</view>
